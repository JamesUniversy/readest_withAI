readest_withAI/
├── apps/
│   └── readest-app/                   # 现有readest应用
│       ├── src/
│       │   ├── services/
│       │   │   ├── tts/               # 现有TTS服务
│       │   │   │   ├── TTSController.ts
│       │   │   │   ├── EdgeTTSClient.ts
│       │   │   │   ├── NativeTTSClient.ts
│       │   │   │   └── WebSpeechClient.ts
│       │   │   └── ai-tts/            # 新增：AI TTS HTTP客户端
│       │   │       ├── AITTSApiClient.ts    # HTTP API调用客户端
│       │   │       ├── AITTSController.ts   # 继承TTSController
│       │   │       └── CacheManager.ts      # 本地缓存管理
│       │   ├── components/
│       │   │   └── ai-tts/            # AI TTS UI组件
│       │   │       ├── AITTSControl.tsx
│       │   │       ├── CharacterEditor.tsx
│       │   │       ├── VoiceSelector.tsx
│       │   │       ├── ProcessProgress.tsx
│       │   │       └── ServiceStatus.tsx    # 服务状态监控
│       │   ├── types/
│       │   │   └── ai-tts-api.ts      # API接口类型定义
│       │   └── utils/
│       │       └── ai-tts/
│       │           ├── apiClient.ts    # API调用工具
│       │           ├── errorHandler.ts # 错误处理
│       │           └── fileUploader.ts # 文件上传工具
│       └── src-tauri/
│           ├── src/
│           │   └── file_manager.rs    # 文件管理（可选）
│           └── plugins/
│               └── tauri-plugin-file-transfer/ # 文件传输插件（可选）
│
├── ai-tts-service/                    # 独立的Python AI服务
│   ├── app/
│   │   ├── __init__.py
│   │   ├── main.py                    # FastAPI应用入口
│   │   ├── config.py                  # 配置管理
│   │   ├── dependencies.py            # 依赖注入
│   │   └── middleware.py              # 中间件
│   ├── api/                           # API路由
│   │   ├── __init__.py
│   │   ├── v1/
│   │   │   ├── __init__.py
│   │   │   ├── endpoints/
│   │   │   │   ├── __init__.py
│   │   │   │   ├── text_analysis.py   # 文本分析API
│   │   │   │   ├── character_management.py # 角色管理API
│   │   │   │   ├── voice_synthesis.py # 语音合成API
│   │   │   │   └── audio_generation.py # 音频生成API
│   │   │   └── router.py              # 路由汇总
│   │   └── deps.py                    # API依赖
│   ├── core/                          # 核心业务逻辑
│   │   ├── __init__.py
│   │   ├── text_analyzer.py           # 文本分析服务
│   │   ├── character_detector.py      # 角色识别
│   │   ├── voice_matcher.py           # 声音匹配
│   │   ├── audio_synthesizer.py       # 音频合成
│   │   └── cache_manager.py           # 缓存管理
│   ├── models/                        # 数据模型
│   │   ├── __init__.py
│   │   ├── schemas.py                 # Pydantic模型
│   │   ├── database.py                # 数据库模型
│   │   └── enums.py                   # 枚举定义
│   ├── services/                      # 外部服务集成
│   │   ├── __init__.py
│   │   ├── ai_clients/
│   │   │   ├── __init__.py
│   │   │   ├── openai_client.py       # OpenAI客户端
│   │   │   ├── grok_client.py         # Grok客户端
│   │   │   └── base_client.py         # 基础AI客户端
│   │   ├── tts_engines/
│   │   │   ├── __init__.py
│   │   │   ├── edge_tts.py            # Edge TTS集成
│   │   │   ├── azure_tts.py           # Azure TTS
│   │   │   ├── volcengine_tts.py      # 火山引擎TTS
│   │   │   └── base_tts.py            # TTS基类
│   │   └── storage/
│   │       ├── __init__.py
│   │       ├── local_storage.py       # 本地存储
│   │       └── cloud_storage.py       # 云存储（可选）
│   ├── utils/                         # 工具函数
│   │   ├── __init__.py
│   │   ├── file_processor.py          # 文件处理
│   │   ├── text_parser.py             # 文本解析
│   │   ├── audio_processor.py         # 音频处理
│   │   ├── logger.py                  # 日志管理
│   │   └── validators.py              # 数据验证
│   ├── db/                            # 数据库
│   │   ├── __init__.py
│   │   ├── session.py                 # 数据库会话
│   │   ├── base.py                    # 基础模型
│   │   └── migrations/                # 数据库迁移
│   ├── static/                        # 静态文件
│   │   ├── voice_samples/             # 声音样本
│   │   └── character_presets/         # 角色预设
│   ├── tests/                         # 测试
│   │   ├── __init__.py
│   │   ├── conftest.py
│   │   ├── test_api/
│   │   ├── test_core/
│   │   └── test_services/
│   ├── requirements.txt               # Python依赖
│   ├── Dockerfile                     # Docker配置
│   ├── docker-compose.yml             # Docker Compose
│   ├── .env.example                   # 环境变量示例
│   └── README.md                      # 服务文档
│
├── deployment/                        # 部署配置
│   ├── docker/
│   │   ├── ai-service.dockerfile
│   │   └── nginx.conf
│   ├── kubernetes/                    # K8s配置（可选）
│   └── scripts/
│       ├── start-services.sh          # 启动脚本
│       ├── build-all.sh              # 构建脚本
│       └── deploy.sh                 # 部署脚本
│
├── shared/                           # 共享资源和配置
│   ├── voice-library/                # 声音库配置
│   │   ├── voice-configs.json
│   │   └── voice-mappings.json
│   ├── character-templates/          # 角色模板
│   │   ├── common-characters.json
│   │   └── genre-specific.json
│   ├── ai-prompts/                   # AI提示词
│   │   ├── character-analysis.md
│   │   ├── dialogue-detection.md
│   │   └── voice-matching.md
│   └── docs/                         # 文档
│       ├── api-specification.md
│       ├── deployment-guide.md
│       └── development-setup.md
│
└── tools/                           # 开发工具
    ├── data-migration/              # 数据迁移工具
    ├── voice-library-manager/       # 声音库管理工具
    └── testing-utilities/           # 测试工具